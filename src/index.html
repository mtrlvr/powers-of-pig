<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <title>Powers of Pig</title>
    <link rel="stylesheet" href="styles.css">
    <script defer data-domain="powersofpig.com" src="https://va.vercel-scripts.com/v1/script.js"></script>
    <!-- PostHog Analytics -->
    <script>
        !function(t,e){var o,n,p,r;e.__SV||(window.posthog=e,e._i=[],e.init=function(i,s,a){function g(t,e){var o=e.split(".");2==o.length&&(t=t[o[0]],e=o[1]),t[e]=function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))}}(p=t.createElement("script")).type="text/javascript",p.async=!0,p.src=s.api_host+"/static/array.js",(r=t.getElementsByTagName("script")[0]).parentNode.insertBefore(p,r);var u=e;for(void 0!==a?u=e[a]=[]:a="posthog",u.people=u.people||[],u.toString=function(t){var e="posthog";return"posthog"!==a&&(e+="."+a),t||(e+=" (stub)"),e},u.people.toString=function(){return u.toString(1)+".people (stub)"},o="capture identify alias people.set people.set_once set_config register register_once unregister opt_out_capturing has_opted_out_capturing opt_in_capturing reset isFeatureEnabled onFeatureFlags getFeatureFlag getFeatureFlagPayload reloadFeatureFlags group updateEarlyAccessFeatureEnrollment getEarlyAccessFeatures getActiveMatchingSurveys getSurveys onSessionId".split(" "),n=0;n<o.length;n++)g(u,o[n]);e._i.push([i,s,a])},e.__SV=1)}(document,window.posthog||[]);
        posthog.init('phc_hX8ezASA5I3IAhaSnH0XlcU4ePBW22CvdytKIAUyOtu', {
            api_host: 'https://us.i.posthog.com',
            capture_pageview: true,
            capture_pageleave: true,
            autocapture: false,
            session_recording: {
                maskAllInputs: true
            }
        });
    </script>
</head>
<body>
    <!-- HOME SCREEN -->
    <div class="screen home-screen" id="home-screen">
        <button class="lang-toggle" aria-label="Toggle language">EN</button>
        <h1 class="home-title" data-i18n="home.title">Powers of Pig</h1>
        <div class="home-pig">üê∑</div>
        <button class="btn btn-primary" id="play-button" data-i18n="home.play">Play</button>
        <button class="btn btn-secondary" id="collection-button" data-i18n="home.collection">Collection</button>
        <div class="high-score-display">
            <span data-i18n="home.highScore">High Score:</span>
            <span id="high-score">0</span>
        </div>
    </div>

    <!-- GAME SCREEN -->
    <div class="screen game-screen" id="game-screen">
        <header class="game-header">
            <button class="icon-btn" id="home-button" title="Home">üè†</button>
            <div class="score-container">
                <div class="score-label" data-i18n="game.score">Score</div>
                <div class="score-value" id="score">0</div>
            </div>
            <div class="header-buttons">
                <button class="icon-btn" id="undo-button" title="Undo">‚Ü©Ô∏è</button>
                <button class="icon-btn" id="sound-button" title="Sound">üîä</button>
                <button class="icon-btn" id="pause-button" title="Pause">‚è∏Ô∏è</button>
                <button class="lang-toggle lang-toggle-header" aria-label="Toggle language">EN</button>
            </div>
        </header>

        <div class="board-container">
            <div class="grid-background" id="grid-background"></div>
            <div class="tile-container" id="tile-container"></div>
        </div>

        <p class="instructions" data-i18n="game.instructions">Swipe or use arrow keys to move tiles</p>
        <a class="feedback-link" id="feedback-link" data-i18n="game.giveFeedback">Give Feedback</a>
    </div>

    <!-- PAUSE MENU (overlay) -->
    <div class="overlay" id="pause-overlay">
        <div class="modal">
            <button class="lang-toggle lang-toggle-modal" aria-label="Toggle language">EN</button>
            <h2 data-i18n="pause.title">Paused</h2>
            <button class="btn btn-primary" id="resume-button" data-i18n="pause.resume">Resume</button>
            <button class="btn btn-secondary" id="restart-button" data-i18n="pause.restart">Restart</button>
            <button class="btn btn-secondary" id="pause-home-button" data-i18n="pause.home">Home</button>
        </div>
    </div>

    <!-- RESTART CONFIRMATION MODAL -->
    <div class="overlay" id="restart-overlay">
        <div class="modal">
            <h2 data-i18n="restart.title">Start Over?</h2>
            <div class="modal-buttons">
                <button class="btn btn-secondary" id="restart-cancel" data-i18n="restart.cancel">Cancel</button>
                <button class="btn btn-danger" id="restart-confirm" data-i18n="restart.confirm">Confirm</button>
            </div>
        </div>
    </div>

    <!-- FEEDBACK MODAL -->
    <div class="overlay" id="feedback-overlay">
        <div class="modal feedback-modal">
            <h2 data-i18n="feedback.title">Quick feedback</h2>
            <div class="feedback-question">
                <label data-i18n="feedback.question1">Who would you send this to?</label>
                <input type="text" id="feedback-send-to" class="feedback-input" maxlength="500" data-i18n-placeholder="feedback.placeholder1" placeholder="e.g. my brother, a friend who likes puzzle games...">
            </div>
            <div class="feedback-question">
                <label data-i18n="feedback.question2">What would make it better?</label>
                <textarea id="feedback-improve" class="feedback-textarea" rows="3" maxlength="1000"></textarea>
            </div>
            <!-- Honeypot field - hidden from humans, bots will fill it -->
            <input type="text" name="website" id="feedback-honeypot" autocomplete="off" tabindex="-1" style="position:absolute;left:-9999px;opacity:0;">
            <div class="feedback-buttons">
                <button class="btn btn-primary" id="feedback-submit" data-i18n="feedback.submit">Submit</button>
                <button class="btn btn-secondary" id="feedback-skip" data-i18n="feedback.skip">Maybe later</button>
            </div>
        </div>
    </div>

    <!-- GAME OVER SCREEN -->
    <div class="screen gameover-screen" id="gameover-screen">
        <button class="lang-toggle" aria-label="Toggle language">EN</button>
        <h2 data-i18n="gameOver.title">Game Over!</h2>
        <div class="final-score">
            <span data-i18n="gameOver.score">Score:</span>
            <span id="final-score">0</span>
        </div>
        <div class="highest-pig">
            <span data-i18n="gameOver.highestPig">Highest pig:</span>
            <div class="pig-badge" id="highest-pig-badge"></div>
        </div>
        <div class="new-pig-unlocked" id="new-pig-message" style="display: none;">
            <p data-i18n="gameOver.newPig">New pig discovered!</p>
            <div class="pig-badge" id="new-pig-badge"></div>
        </div>
        <button class="btn btn-primary" id="play-again-button" data-i18n="gameOver.playAgain">Play Again</button>
        <button class="btn btn-secondary" id="gameover-home-button" data-i18n="gameOver.home">Home</button>
    </div>

    <!-- WIN SCREEN -->
    <div class="screen win-screen" id="win-screen">
        <button class="lang-toggle" aria-label="Toggle language">EN</button>
        <h2 data-i18n="win.title">üéâ Congratulations! üéâ</h2>
        <p class="win-message" data-i18n="win.created">You've created</p>
        <div class="lion-pig-badge" data-i18n="win.lionPig">THE LION PIG</div>
        <p class="win-submessage" data-i18n="win.emoji">üê∑ü¶Å</p>
        <button class="btn btn-primary" id="continue-button" data-i18n="win.continue">Continue Playing</button>
        <button class="btn btn-secondary" id="new-game-button" data-i18n="win.newGame">New Game</button>
    </div>

    <!-- COLLECTION SCREEN (Badge Gallery) -->
    <div class="screen collection-screen" id="collection-screen">
        <header class="collection-header">
            <button class="icon-btn" id="collection-back-button">‚Üê</button>
            <h2 data-i18n="collection.title">Collection</h2>
            <div class="collection-header-right">
                <div class="collection-progress" id="collection-progress">0/17</div>
                <button class="lang-toggle lang-toggle-header" aria-label="Toggle language">EN</button>
            </div>
        </header>
        <div class="badge-grid" id="badge-grid"></div>
    </div>

    <script src="strings.js"></script>
    <script src="game.js"></script>
</body>
</html>
